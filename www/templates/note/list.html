<ion-view cache-view="false">
    <ion-nav-title>
      笔记
    </ion-nav-title>

    <ion-nav-buttons side="right">
      <button class="button icon ion-plus-round" ui-sref="app.note_edit"></button>
    </ion-nav-buttons>
    
    <ion-content>
      <ion-refresher
        pulling-text="下拉刷新..."
        on-refresh="refresh()" refreshing-text="完成">
      </ion-refresher>

      <ion-list>
        <ion-item class="item-remove-animate item-icon-right" collection-repeat="note in notes" type="item-text-wrap" ui-sref="app.note_view({id: note._id})">
          <h2>{{note.title}}</h2>
          <p>{{note.createOn | date : 'yyyy年M月d日 H:mm:ss'}}</p>
          <i class="icon ion-chevron-right icon-accessory"></i>
          <ion-option-button class="button-light" ui-sref="app.note_edit({id: note._id})">编辑</ion-option-button>
          <ion-option-button class="button-assertive" ng-click="remove(note)">
            删除
          </ion-option-button>
        </ion-item>
      </ion-list>

      <ion-infinite-scroll on-infinite="loadMore()" distance="1%" ng-if="hasMore">
      </ion-infinite-scroll>
    </ion-content>
</ion-view>